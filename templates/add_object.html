<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Add an Object</title>
</head>

<body>
  {% if message %}
  <p style="color: red;">{{ message }}</p>
  {% endif %}

  <form action="{{ url_for('add_object') }}" method="post">
    <label for="table_name">Select Table:</label>
    <select id="table_name" name="table_name" required onchange="this.form.submit()">
      <option value="" disabled selected>Select a table</option>
      {% for table in tables %}
      <option value="{{ table }}" {% if table in request.form.table_name %}selected{% endif %}>{{ table }}</option>
      {% endfor %}
    </select>
  </form>

  {% if columns %}
  <form action="{{ url_for('add_object') }}" method="post">
    <input type="hidden" name="table_name" value="{{ request.form.table_name }}">

    {% for column in columns %}
    <div>
      <label for="{{ column.name }}">{{ column.name }} ({{ column.type }}):</label>
      {% if "INTEGER" in column.type %}
      <input type="number" id="{{ column.name }}" name="{{ column.name }}" required>
      {% elif "BOOLEAN" in column.type %}
      <select id="{{ column.name }}" name="{{ column.name }}">
        <option value="True">True</option>
        <option value="False">False</option>
      </select>
      {% else %}
      <input type="text" id="{{ column.name }}" name="{{ column.name }}" required>
      {% endif %}
    </div>
    {% endfor %}

    <button type="submit" name="submit">Add Object</button>
  </form>
  {% endif %}

  <a href="{{ url_for('dashboard') }}">Go back</a>
</body>

</html>